From 932fd65d79c48d3851ea6bf274c0eb574583ffb3 Mon Sep 17 00:00:00 2001
From: Alec Leamas <leamas.alec@gmail.com>
Date: Mon, 16 Jul 2018 00:17:23 +0200
Subject: [PATCH 4/4] Build: Add flatpak installation path.

---
 CMakeLists.txt | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index d2115bf..78cc60f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -80,6 +80,15 @@ IF (NOT WIN32)
         SET (LIB_INSTALL_DIR "lib")
       ENDIF (CMAKE_SIZEOF_VOID_P MATCHES "8")
     ENDIF (EXISTS /etc/redhat-release)
+    IF (EXISTS /app)
+      # Flatpak build.
+      IF (CMAKE_SIZEOF_VOID_P MATCHES "8")
+        SET (ARCH "x86_64")
+      ELSE (CMAKE_SIZEOF_VOID_P MATCHES "8")
+        SET (ARCH "i386")
+      ENDIF (CMAKE_SIZEOF_VOID_P MATCHES "8")
+      SET (LIB_INSTALL_DIR "lib")
+    ENDIF (EXISTS /app)
   ENDIF (UNIX AND NOT APPLE)
 endif(NOT WIN32)
 
-- 
2.14.4

